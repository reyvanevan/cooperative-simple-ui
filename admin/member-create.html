<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tambah Anggota Baru - Nexus Admin</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#F8FAFC',
                        darkBg: '#0f172a',
                        darkCard: '#1e293b'
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }

        /* Wizard Steps Transition */
        .step-panel {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .step-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Remove number spinner */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>

<body class="bg-secondary text-slate-800 antialiased dark:bg-darkBg dark:text-slate-200 transition-colors duration-300">

    <div id="sidebar-overlay"
        class="fixed inset-0 bg-black/50 z-40 hidden opacity-0 transition-opacity duration-300 backdrop-blur-sm"></div>
    <div id="sidebar-container"></div>

    <div id="main-content-wrapper" class="md:ml-64 min-h-screen flex flex-col transition-all duration-300">

        <header
            class="h-16 bg-white dark:bg-darkCard border-b border-slate-200 dark:border-slate-700 flex items-center justify-between px-6 sticky top-0 z-20 transition-colors duration-300">
            <div class="flex items-center gap-4">
                <button id="sidebar-toggle" class="md:hidden text-slate-500 hover:text-primary transition-colors">
                    <i class='bx bx-menu text-2xl'></i>
                </button>
                <a href="members-list.html"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-white transition-colors">
                    <i class='bx bx-arrow-back text-xl'></i>
                </a>
                <div class="h-6 w-px bg-slate-200 dark:bg-slate-700"></div>
                <h1 class="text-[14px] font-bold text-slate-800 dark:text-white">Registrasi Anggota Baru</h1>
            </div>
            <div class="flex items-center gap-2">
                <button id="theme-toggle"
                    class="w-[34px] h-[34px] flex items-center justify-center text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-all">
                    <i id="theme-icon" class='bx bx-moon text-[20px]'></i>
                </button>
            </div>
        </header>

        <main class="flex-1 p-6 space-y-6 overflow-y-auto">

            <div class="max-w-3xl mx-auto mb-8">
                <div class="flex items-center justify-between relative">
                    <div
                        class="absolute left-0 top-1/2 -translate-y-1/2 w-full h-1 bg-slate-200 dark:bg-slate-700 -z-10 rounded-full">
                    </div>
                    <div id="progress-bar"
                        class="absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-primary -z-10 rounded-full transition-all duration-500"
                        style="width: 0%"></div>

                    <div class="flex flex-col items-center gap-2 cursor-pointer" onclick="goToStep(1)">
                        <div id="step-icon-1"
                            class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all">
                            1</div>
                        <span
                            class="text-[10px] font-bold text-primary uppercase tracking-wider bg-white dark:bg-darkCard px-1">Akun</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer" onclick="goToStep(2)">
                        <div id="step-icon-2"
                            class="w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-500 flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all">
                            2</div>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-wider bg-white dark:bg-darkCard px-1">Biodata</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer" onclick="goToStep(3)">
                        <div id="step-icon-3"
                            class="w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-500 flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all">
                            3</div>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-wider bg-white dark:bg-darkCard px-1">Simpanan</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer" onclick="goToStep(4)">
                        <div id="step-icon-4"
                            class="w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-500 flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all">
                            4</div>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-wider bg-white dark:bg-darkCard px-1">Review</span>
                    </div>
                </div>
            </div>

            <form action="#"
                class="max-w-3xl mx-auto bg-white dark:bg-darkCard rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden">

                <div id="step-1" class="step-panel active p-8">
                    <div class="text-center mb-8">
                        <div
                            class="w-12 h-12 bg-indigo-50 dark:bg-indigo-900/20 text-primary rounded-xl flex items-center justify-center text-2xl mx-auto mb-3">
                            <i class='bx bx-user-pin'></i>
                        </div>
                        <h2 class="text-lg font-bold text-slate-900 dark:text-white">Hubungkan Akun Pengguna</h2>
                        <p class="text-xs text-slate-500">Pilih user yang sudah ada atau buat akun baru.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <label class="cursor-pointer group">
                            <input type="radio" name="account_type" value="existing" class="peer sr-only" checked
                                onchange="toggleAccountType('existing')">
                            <div
                                class="p-4 rounded-xl border-2 border-primary bg-indigo-50/50 dark:bg-indigo-900/10 dark:border-primary peer-checked:ring-0 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-center">
                                <i class='bx bx-search-alt text-2xl text-primary mb-2'></i>
                                <h5 class="text-sm font-bold text-slate-800 dark:text-white">Pilih User Ada</h5>
                                <p class="text-[10px] text-slate-500">Cari dari database user</p>
                            </div>
                        </label>
                        <label class="cursor-pointer group">
                            <input type="radio" name="account_type" value="new" class="peer sr-only"
                                onchange="toggleAccountType('new')">
                            <div
                                class="p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 peer-checked:border-primary peer-checked:bg-indigo-50/50 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-center">
                                <i class='bx bx-user-plus text-2xl text-slate-400 peer-checked:text-primary mb-2'></i>
                                <h5 class="text-sm font-bold text-slate-800 dark:text-white">Buat User Baru</h5>
                                <p class="text-[10px] text-slate-500">Register email & password</p>
                            </div>
                        </label>
                    </div>

                    <div id="input-existing">
                        <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Cari
                            User</label>
                        <select
                            class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white">
                            <option>Pilih User...</option>
                            <option>aditya.pratama@mhs.ac.id</option>
                            <option>budi.santoso@staff.ac.id</option>
                        </select>
                    </div>

                    <div id="input-new" class="hidden space-y-4">
                        <div>
                            <label
                                class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Email</label>
                            <input type="email"
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white"
                                placeholder="email@kampus.ac.id">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label
                                    class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Username</label>
                                <input type="text"
                                    class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white"
                                    placeholder="username">
                            </div>
                            <div>
                                <label
                                    class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Password</label>
                                <input type="password"
                                    class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white"
                                    value="12345678">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step-2" class="step-panel p-8">
                    <div class="text-center mb-6">
                        <h2 class="text-lg font-bold text-slate-900 dark:text-white">Data Diri Anggota</h2>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div class="md:col-span-2">
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Nama
                                Lengkap</label>
                            <input type="text"
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white"
                                placeholder="Sesuai KTP/KTM">
                        </div>

                        <div>
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">NIM /
                                NIP</label>
                            <input type="text"
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white">
                        </div>

                        <div>
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">No.
                                Telepon (WA)</label>
                            <input type="text"
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white">
                        </div>

                        <div>
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Jenis
                                Kelamin</label>
                            <div class="flex gap-4 mt-2">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="gender" class="text-primary focus:ring-primary" checked>
                                    <span class="text-[13px] text-slate-700 dark:text-slate-300">Laki-laki</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="gender" class="text-primary focus:ring-primary">
                                    <span class="text-[13px] text-slate-700 dark:text-slate-300">Perempuan</span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Unit
                                Kerja / Prodi</label>
                            <select
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white">
                                <option>Teknik Informatika</option>
                                <option>Teknik Mesin</option>
                                <option>Akuntansi</option>
                                <option>Staff Administrasi</option>
                            </select>
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Alamat
                                Domisili</label>
                            <textarea rows="2"
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2.5 text-[13px] outline-none focus:border-primary dark:text-white"></textarea>
                        </div>
                    </div>
                </div>

                <div id="step-3" class="step-panel p-8">
                    <div class="text-center mb-6">
                        <h2 class="text-lg font-bold text-slate-900 dark:text-white">Setoran Awal Simpanan</h2>
                        <p class="text-xs text-slate-500">Wajib diisi untuk aktivasi keanggotaan.</p>
                    </div>

                    <div class="space-y-4">

                        <div
                            class="p-4 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800 rounded-xl flex items-center justify-between gap-4">
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-10 h-10 rounded-full bg-white dark:bg-slate-800 flex items-center justify-center text-indigo-600 shadow-sm">
                                    <i class='bx bxs-lock-alt'></i>
                                </div>
                                <div>
                                    <h6 class="text-[13px] font-bold text-slate-800 dark:text-white">Simpanan Pokok</h6>
                                    <p class="text-[10px] text-slate-500">Wajib (Sekali Bayar)</p>
                                </div>
                            </div>
                            <div class="w-40 relative">
                                <span class="absolute left-3 top-2.5 text-xs text-slate-500 font-bold">Rp</span>
                                <input type="number" id="input-pokok"
                                    class="w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg pl-8 pr-3 py-2 text-[13px] font-bold text-right outline-none focus:border-primary dark:text-white"
                                    value="100000" oninput="calculateTotal()">
                            </div>
                        </div>

                        <div
                            class="p-4 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 rounded-xl flex items-center justify-between gap-4">
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-10 h-10 rounded-full bg-white dark:bg-slate-800 flex items-center justify-center text-blue-600 shadow-sm">
                                    <i class='bx bxs-calendar'></i>
                                </div>
                                <div>
                                    <h6 class="text-[13px] font-bold text-slate-800 dark:text-white">Simpanan Wajib</h6>
                                    <p class="text-[10px] text-slate-500">Wajib (Bulanan)</p>
                                </div>
                            </div>
                            <div class="w-40 relative">
                                <span class="absolute left-3 top-2.5 text-xs text-slate-500 font-bold">Rp</span>
                                <input type="number" id="input-wajib"
                                    class="w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg pl-8 pr-3 py-2 text-[13px] font-bold text-right outline-none focus:border-primary dark:text-white"
                                    value="50000" oninput="calculateTotal()">
                            </div>
                        </div>

                        <div
                            class="p-4 bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-100 dark:border-emerald-800 rounded-xl flex items-center justify-between gap-4">
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-10 h-10 rounded-full bg-white dark:bg-slate-800 flex items-center justify-center text-emerald-600 shadow-sm">
                                    <i class='bx bxs-wallet'></i>
                                </div>
                                <div>
                                    <h6 class="text-[13px] font-bold text-slate-800 dark:text-white">Simpanan Sukarela
                                    </h6>
                                    <p class="text-[10px] text-slate-500">Opsional (Tabungan)</p>
                                </div>
                            </div>
                            <div class="w-40 relative">
                                <span class="absolute left-3 top-2.5 text-xs text-slate-500 font-bold">Rp</span>
                                <input type="number" id="input-sukarela"
                                    class="w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg pl-8 pr-3 py-2 text-[13px] font-bold text-right outline-none focus:border-primary dark:text-white"
                                    value="0" oninput="calculateTotal()">
                            </div>
                        </div>

                        <div class="mt-4">
                            <label class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 mb-1.5">Bukti
                                Transfer (Total Tagihan)</label>
                            <input type="file"
                                class="block w-full text-[12px] text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-[11px] file:font-semibold file:bg-slate-100 file:text-slate-700 hover:file:bg-slate-200 dark:file:bg-slate-700 dark:file:text-white">
                        </div>

                    </div>
                </div>

                <div id="step-4" class="step-panel p-8">
                    <div class="text-center mb-6">
                        <div
                            class="w-14 h-14 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center text-3xl mx-auto mb-3">
                            <i class='bx bx-check'></i>
                        </div>
                        <h2 class="text-lg font-bold text-slate-900 dark:text-white">Siap Didaftarkan</h2>
                        <p class="text-xs text-slate-500">Pastikan data berikut sudah benar.</p>
                    </div>

                    <div
                        class="bg-slate-50 dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 space-y-4">
                        <div class="flex justify-between border-b border-slate-200 dark:border-slate-600 pb-2">
                            <span class="text-xs text-slate-500">Nama Anggota</span>
                            <span class="text-xs font-bold text-slate-800 dark:text-white">Budi Santoso</span>
                        </div>
                        <div class="flex justify-between border-b border-slate-200 dark:border-slate-600 pb-2">
                            <span class="text-xs text-slate-500">NIM / NIP</span>
                            <span class="text-xs font-bold text-slate-800 dark:text-white">10115320</span>
                        </div>

                        <div class="pt-2">
                            <p class="text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-2">Rincian
                                Tagihan Awal</p>
                            <div class="space-y-1">
                                <div class="flex justify-between text-xs">
                                    <span class="text-slate-500">Simpanan Pokok</span>
                                    <span class="font-medium" id="review-pokok">Rp 100.000</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-slate-500">Simpanan Wajib</span>
                                    <span class="font-medium" id="review-wajib">Rp 50.000</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-slate-500">Simpanan Sukarela</span>
                                    <span class="font-medium" id="review-sukarela">Rp 0</span>
                                </div>
                                <div
                                    class="flex justify-between items-center pt-2 mt-2 border-t border-slate-200 dark:border-slate-600">
                                    <span class="text-sm font-bold text-slate-800 dark:text-white">Total Bayar</span>
                                    <span class="text-lg font-bold text-primary" id="review-total">Rp 150.000</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    class="px-8 py-5 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-700 flex justify-between items-center">
                    <div class="text-right flex-1" id="total-preview-container" style="display: none;">
                        <span class="text-[10px] text-slate-500 uppercase font-bold mr-2">Total Tagihan:</span>
                        <span class="text-lg font-bold text-slate-800 dark:text-white" id="footer-total">Rp
                            150.000</span>
                    </div>

                    <div class="flex gap-3 ml-auto">
                        <button type="button" id="btn-prev" onclick="prevStep()"
                            class="hidden px-5 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 text-[13px] font-bold hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            Kembali
                        </button>
                        <button type="button" id="btn-next" onclick="nextStep()"
                            class="px-6 py-2.5 rounded-lg bg-primary hover:bg-indigo-700 text-white text-[13px] font-bold shadow-lg shadow-indigo-500/30 transition-all flex items-center gap-2">
                            Lanjut <i class='bx bx-right-arrow-alt text-lg'></i>
                        </button>
                    </div>
                </div>

            </form>

        </main>
    </div>

    <script src="../js/sidebar.js"></script>
    <script>
        // --- COMPONENT LOADER ---
        async function loadComponents() {
            try {
                const sidebarRes = await fetch('../components/sidebar.html');
                const sidebarHtml = await sidebarRes.text();
                const container = document.getElementById('sidebar-container');
                container.innerHTML = sidebarHtml;

                // Initialize Sidebar Logic
                initSidebar();

            } catch (error) {
                console.error("Error loading components:", error);
            }
        }

        loadComponents();

        // 1. Wizard Logic
        let currentStep = 1;
        const totalSteps = 4;

        function showStep(step) {
            // Hide all
            document.querySelectorAll('.step-panel').forEach(el => el.classList.remove('active'));
            // Show current
            document.getElementById(`step-${step}`).classList.add('active');

            // Update Icons
            for (let i = 1; i <= totalSteps; i++) {
                const icon = document.getElementById(`step-icon-${i}`);
                if (i < step) { // Done
                    icon.className = "w-8 h-8 rounded-full bg-emerald-500 text-white flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all";
                    icon.innerHTML = "<i class='bx bx-check text-lg'></i>";
                } else if (i === step) { // Active
                    icon.className = "w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all";
                    icon.innerText = i;
                } else { // Inactive
                    icon.className = "w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-500 flex items-center justify-center font-bold text-xs ring-4 ring-white dark:ring-darkCard transition-all";
                    icon.innerText = i;
                }
            }

            // Update Progress Bar
            const progress = ((step - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            // Update Buttons
            const btnPrev = document.getElementById('btn-prev');
            const btnNext = document.getElementById('btn-next');
            const footerTotal = document.getElementById('total-preview-container');

            if (step === 1) btnPrev.classList.add('hidden');
            else btnPrev.classList.remove('hidden');

            if (step === totalSteps) {
                btnNext.innerHTML = "<i class='bx bx-check-circle text-lg'></i> Simpan Anggota";
                btnNext.classList.replace('bg-primary', 'bg-emerald-600');
                btnNext.classList.replace('hover:bg-indigo-700', 'hover:bg-emerald-700');
                btnNext.classList.replace('shadow-indigo-500/30', 'shadow-emerald-500/30');
            } else {
                btnNext.innerHTML = "Lanjut <i class='bx bx-right-arrow-alt text-lg'></i>";
                btnNext.classList.replace('bg-emerald-600', 'bg-primary');
                btnNext.classList.replace('hover:bg-emerald-700', 'hover:bg-indigo-700');
                btnNext.classList.replace('shadow-emerald-500/30', 'shadow-indigo-500/30');
            }

            // Show total only on step 3
            if (step === 3) footerTotal.style.display = 'block';
            else footerTotal.style.display = 'none';

            // Recalculate on step 4 entry
            if (step === 4) calculateTotal();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            } else {
                // Submit form logic here
                alert("Data Anggota Berhasil Disimpan!");
                window.location.href = "members-list.html";
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function goToStep(step) {
            // Allow jump only if already visited or next
            if (step <= currentStep + 1) {
                currentStep = step;
                showStep(currentStep);
            }
        }

        // 2. Account Type Toggle
        function toggleAccountType(type) {
            const existing = document.getElementById('input-existing');
            const newItem = document.getElementById('input-new');
            const existingContainer = document.querySelector('label:has(input[value="existing"]) div');
            const newContainer = document.querySelector('label:has(input[value="new"]) div');

            if (type === 'existing') {
                existing.classList.remove('hidden');
                newItem.classList.add('hidden');
                existingContainer.classList.add('border-primary', 'bg-indigo-50/50', 'dark:bg-indigo-900/10', 'dark:border-primary');
                existingContainer.classList.remove('border-slate-100', 'dark:border-slate-700');
                newContainer.classList.remove('border-primary', 'bg-indigo-50/50', 'dark:bg-indigo-900/10', 'dark:border-primary');
                newContainer.classList.add('border-slate-100', 'dark:border-slate-700');
            } else {
                existing.classList.add('hidden');
                newItem.classList.remove('hidden');
                newContainer.classList.add('border-primary', 'bg-indigo-50/50', 'dark:bg-indigo-900/10', 'dark:border-primary');
                newContainer.classList.remove('border-slate-100', 'dark:border-slate-700');
                existingContainer.classList.remove('border-primary', 'bg-indigo-50/50', 'dark:bg-indigo-900/10', 'dark:border-primary');
                existingContainer.classList.add('border-slate-100', 'dark:border-slate-700');
            }
        }

        // 3. Calculator Logic
        function calculateTotal() {
            const pokok = parseInt(document.getElementById('input-pokok').value) || 0;
            const wajib = parseInt(document.getElementById('input-wajib').value) || 0;
            const sukarela = parseInt(document.getElementById('input-sukarela').value) || 0;
            const total = pokok + wajib + sukarela;

            const formatter = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 });

            // Update Footer
            document.getElementById('footer-total').innerText = formatter.format(total);

            // Update Review Page
            document.getElementById('review-pokok').innerText = formatter.format(pokok);
            document.getElementById('review-wajib').innerText = formatter.format(wajib);
            document.getElementById('review-sukarela').innerText = formatter.format(sukarela);
            document.getElementById('review-total').innerText = formatter.format(total);
        }

        // 4. Dark Mode (Standard)
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const html = document.documentElement;

        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark'); themeIcon.classList.replace('bx-moon', 'bx-sun');
        }

        themeToggleBtn.addEventListener('click', function () {
            html.classList.toggle('dark');
            if (html.classList.contains('dark')) {
                themeIcon.classList.replace('bx-moon', 'bx-sun'); localStorage.setItem('color-theme', 'dark');
            } else {
                themeIcon.classList.replace('bx-sun', 'bx-moon'); localStorage.setItem('color-theme', 'light');
            }
        });

        // Init
        calculateTotal();
    </script>
</body>

</html>